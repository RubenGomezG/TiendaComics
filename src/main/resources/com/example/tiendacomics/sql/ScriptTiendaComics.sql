SET GLOBAL log_bin_trust_function_creators = 1;
USE tiendacomics;
CREATE TABLE articulos(cod_articulo INTEGER PRIMARY KEY,nombre VARCHAR(400) NOT NULL,precio DECIMAL(5,2) NOT NULL,stock INTEGER NOT NULL);
CREATE TABLE tomos(cod_tomo INTEGER PRIMARY KEY AUTO_INCREMENT,num_volumen INTEGER NOT NULL,descripcion VARCHAR(300) DEFAULT NULL, CONSTRAINT tomo_articulo FOREIGN KEY(cod_tomo) REFERENCES articulos(cod_articulo) ON UPDATE CASCADE ON DELETE CASCADE);
CREATE TABLE juegos_mesa(cod_juego INTEGER PRIMARY KEY, descripcion VARCHAR(300), CONSTRAINT juego_articulo FOREIGN KEY(cod_juego) REFERENCES articulos(cod_articulo) ON UPDATE CASCADE ON DELETE CASCADE);
CREATE TABLE merchandising (cod_merch INTEGER PRIMARY KEY AUTO_INCREMENT,tipo ENUM ('Ropa', 'Accesorio', 'Poster', 'Figura', 'otro') NOT NULL,coleccion VARCHAR(20),talla VARCHAR(10), CONSTRAINT merch_articulo FOREIGN KEY(cod_merch) REFERENCES articulos(cod_articulo) ON UPDATE CASCADE ON DELETE CASCADE);
CREATE TABLE tickets(cod_ticket INTEGER PRIMARY KEY,fecha_hora_ticket DATETIME NOT NULL DEFAULT NOW());
CREATE TABLE ventas(cod_ticket INTEGER NOT NULL, cod_articulo INTEGER NOT NULL, fecha_hora_venta DATETIME NOT NULL DEFAULT NOW(), cantidad INTEGER NOT NULL DEFAULT 1, CONSTRAINT ventas_pk PRIMARY KEY(cod_ticket,cod_articulo), CONSTRAINT articulo_fk FOREIGN KEY(cod_articulo) REFERENCES articulos(cod_articulo) ON UPDATE CASCADE ON DELETE CASCADE, CONSTRAINT tickets_fk FOREIGN KEY(cod_ticket) REFERENCES tickets(cod_ticket) ON UPDATE CASCADE ON DELETE CASCADE);
INSERT INTO articulos (cod_articulo, nombre,precio,stock) VALUES(1,'One Piece',7.99,20);
INSERT INTO tomos(cod_tomo, num_volumen) VALUES (1,1);
INSERT INTO articulos(cod_articulo, nombre,precio,stock) VALUES(2,'Digimon',7.99,10);
INSERT INTO tomos(cod_tomo, num_volumen) VALUES (2,1);
INSERT INTO articulos (cod_articulo, nombre,precio,stock) VALUES(3,'One Piece',7.99,5);
INSERT INTO tomos(cod_tomo, num_volumen) VALUES (3,2);
INSERT INTO articulos(cod_articulo, nombre,precio,stock) VALUES(4,'Bungo Stray Dogs',12.99,3);
INSERT INTO tomos(cod_tomo, num_volumen) VALUES (4,2);
INSERT INTO articulos (cod_articulo, nombre,precio,stock) VALUES(5,'One Piece',7.99,8);
INSERT INTO tomos(cod_tomo, num_volumen) VALUES (5,3);
INSERT INTO articulos(cod_articulo, nombre,precio,stock) VALUES(6,'Bungo Stray Dogs',12.99,12);
INSERT INTO tomos(cod_tomo, num_volumen) VALUES (6,3);
INSERT INTO articulos (cod_articulo, nombre,precio,stock) VALUES(7,'Catan',34.99,2);
INSERT INTO juegos_mesa(cod_juego,descripcion) VALUES (7,'');
INSERT INTO articulos(cod_articulo, nombre,precio,stock) VALUES(8,'Bang',19.99,5);
INSERT INTO juegos_mesa(cod_juego,descripcion) VALUES (8,'');
INSERT INTO articulos (cod_articulo, nombre,precio,stock) VALUES(9,'Virus',14.99,10);
INSERT INTO juegos_mesa(cod_juego,descripcion) VALUES (9,'Un juego de estrategia familiar para 4 jugadores');
INSERT INTO articulos(cod_articulo, nombre,precio,stock) VALUES(10,'Monopoly',40.99,1);
INSERT INTO juegos_mesa(cod_juego,descripcion) VALUES (10,'Si quieres perder a tus amigos, este es tu juego');
INSERT INTO articulos (cod_articulo, nombre,precio,stock) VALUES(11,'Uno',9.99,4);
INSERT INTO juegos_mesa(cod_juego,descripcion) VALUES (11,'Ch√∫pate 4, crack');
INSERT INTO articulos(cod_articulo, nombre,precio,stock) VALUES(12,'Munchkin',19.99,6);
INSERT INTO juegos_mesa(cod_juego,descripcion) VALUES (12,null);
INSERT INTO articulos (cod_articulo, nombre,precio,stock) VALUES(13,'Camiseta Pikachu',19.99,10);
INSERT INTO merchandising(cod_merch,tipo,coleccion,talla) VALUES (13,'Ropa','verano 2022','L');
INSERT INTO articulos(cod_articulo, nombre,precio,stock) VALUES(14,'Collar Harry Potter',6,5);
INSERT INTO merchandising(cod_merch,tipo,coleccion) VALUES (14,'Accesorio','verano 2023');
INSERT INTO articulos (cod_articulo, nombre,precio,stock) VALUES(15,'Camiseta SKK Dazai y Chuuya',19.99,5);
INSERT INTO merchandising(cod_merch,tipo,coleccion,talla) VALUES (15,'Ropa','BSD 2020','XXL');
INSERT INTO articulos(cod_articulo, nombre,precio,stock) VALUES(16,'Poster Avengers',10,200);
INSERT INTO merchandising(cod_merch,tipo,coleccion) VALUES (16,'Poster','primavera 2022');
INSERT INTO articulos (cod_articulo, nombre,precio,stock) VALUES(17,'Figura Goku',99.99,1);
INSERT INTO merchandising(cod_merch,tipo,coleccion) VALUES (17,'Figura','Vanpresto');
INSERT INTO articulos(cod_articulo, nombre,precio,stock) VALUES(18,'Taza Monkey D. Luffy',20,3);
INSERT INTO merchandising(cod_merch,tipo,coleccion) VALUES (18,'Otro','Tazas one piece');
INSERT INTO tickets(cod_ticket, fecha_hora_ticket) VALUES(1,now());
INSERT INTO ventas(cod_ticket, cod_articulo, fecha_hora_venta, cantidad) VALUES(1,7,now(),1);
INSERT INTO ventas(cod_ticket, cod_articulo, fecha_hora_venta, cantidad) VALUES(1,5,now(),6);
INSERT INTO ventas(cod_ticket, cod_articulo, fecha_hora_venta, cantidad) VALUES(1,6,now(),2);
INSERT INTO ventas(cod_ticket, cod_articulo, fecha_hora_venta, cantidad) VALUES(1,4,now(),3);
INSERT INTO tickets(cod_ticket, fecha_hora_ticket) VALUES(2,now());
INSERT INTO ventas(cod_ticket, cod_articulo, fecha_hora_venta, cantidad) VALUES(2,3,now(),1);
INSERT INTO ventas(cod_ticket, cod_articulo, fecha_hora_venta, cantidad) VALUES(2,2,now(),4);
INSERT INTO ventas(cod_ticket, cod_articulo, fecha_hora_venta, cantidad) VALUES(2,1,now(),5);
INSERT INTO ventas(cod_ticket, cod_articulo, fecha_hora_venta, cantidad) VALUES(2,8,now(),2);